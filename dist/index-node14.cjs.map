{"version":3,"file":"index-node14.cjs","sources":["../src/index.ts"],"sourcesContent":["// https://www.npmjs.com/package/babel-preset-modern-browsers\n\ntype AgentKeys = 'chrome' | 'firefox' | 'safari';\n\nexport const minVersions: Record<AgentKeys, number> = {\n  chrome: 80,\n  firefox: 78,\n  safari: 13.1,\n  // 'mobile safari webview': 605.1,\n};\n\ninterface Agent {\n  key: AgentKeys;\n  regExp: RegExp;\n}\n\ninterface AgentVersion {\n  key: AgentKeys;\n  version: string;\n}\n\nconst agents: Agent[] = [\n  { key: 'firefox', regExp: /firefox\\/(\\d+)/i },\n  { key: 'chrome', regExp: /chrom(?:e|ium)\\/(\\d+)/i }, // also works for opera and edge.\n  { key: 'safari', regExp: /version\\/([\\d.]+).*safari/i },\n  // {\n  //   key: 'mobile safari webview',\n  //   regExp: /(?:iPod|iPhone|iPad).+AppleWebKit\\/([\\d.]+)/i,\n  // },\n];\n\nexport function isModernBrowser(userAgent: string): boolean {\n  let agent: AgentVersion | undefined;\n  agents.some(({ key, regExp }) => {\n    const res = regExp.exec(userAgent);\n    if (!res || !res[1]) return false;\n    agent = { key, version: res[1] };\n    return true;\n  });\n  if (!agent) return false;\n\n  const minVersion: number | undefined = minVersions[agent.key];\n  if (!minVersion) return false;\n  return parseFloat(agent.version) >= minVersion;\n}\n"],"names":["minVersions","chrome","firefox","safari","agents","key","regExp","isModernBrowser","userAgent","agent","some","res","exec","version","minVersion","parseFloat"],"mappings":";;;;AAAA;MAIaA,WAAsC,GAAG;AACpDC,EAAAA,MAAM,EAAE,EAD4C;AAEpDC,EAAAA,OAAO,EAAE,EAF2C;AAGpDC,EAAAA,MAAM,EAAE,IAH4C;;AAAA;AAiBtD,MAAMC,MAAe,GAAG,CACtB;AAAEC,EAAAA,GAAG,EAAE,SAAP;AAAkBC,EAAAA,MAAM,EAAE;AAA1B,CADsB,EAEtB;AAAED,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,MAAM,EAAE;AAAzB,CAFsB;AAGtB;AAAED,EAAAA,GAAG,EAAE,QAAP;AAAiBC,EAAAA,MAAM,EAAE;AAAzB,CAHsB;AAKtB;AACA;AACA;AAPsB,CAAxB;AAUO,SAASC,eAAT,CAAyBC,SAAzB,EAAqD;AAC1D,MAAIC,KAAJ;AACAL,EAAAA,MAAM,CAACM,IAAP,CAAY,CAAC;AAAEL,IAAAA,GAAF;AAAOC,IAAAA;AAAP,GAAD,KAAqB;AAC/B,UAAMK,GAAG,GAAGL,MAAM,CAACM,IAAP,CAAYJ,SAAZ,CAAZ;AACA,QAAI,CAACG,GAAD,IAAQ,CAACA,GAAG,CAAC,CAAD,CAAhB,EAAqB,OAAO,KAAP;AACrBF,IAAAA,KAAK,GAAG;AAAEJ,MAAAA,GAAF;AAAOQ,MAAAA,OAAO,EAAEF,GAAG,CAAC,CAAD;AAAnB,KAAR;AACA,WAAO,IAAP;AACD,GALD;AAMA,MAAI,CAACF,KAAL,EAAY,OAAO,KAAP;AAEZ,QAAMK,UAA8B,GAAGd,WAAW,CAACS,KAAK,CAACJ,GAAP,CAAlD;AACA,MAAI,CAACS,UAAL,EAAiB,OAAO,KAAP;AACjB,SAAOC,UAAU,CAACN,KAAK,CAACI,OAAP,CAAV,IAA6BC,UAApC;AACD;;;;;"}