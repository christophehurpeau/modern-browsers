{"version":3,"file":"index-browsermodern.es.js","sources":["../src/index.ts"],"sourcesContent":["// https://www.npmjs.com/package/babel-preset-modern-browsers\n\ninterface Options {\n  edge?: boolean;\n  safari10?: never;\n}\n\nconst agents = [\n  { key: 'edge', regExp: /edge\\/([\\d]+)/i },\n  { key: 'firefox', regExp: /firefox\\/([\\d]+)/i },\n  { key: 'chrome', regExp: /chrom(?:e|ium)\\/([\\d]+)/i }, // also works for opera.\n  { key: 'safari', regExp: /version\\/([\\d.]+).*safari/i },\n  {\n    key: 'mobile safari webview',\n    regExp: /(?:iPod|iPhone|iPad).+AppleWebKit\\/([\\d.]+)/i,\n  },\n];\n\nexport const minVersionsForOptions = (\n  options: Options,\n): { [agent: string]: number | undefined } => {\n  if (options.edge) {\n    return {\n      edge: 15,\n      firefox: 53,\n      chrome: 55,\n      safari: 10.1,\n      // https://en.wikipedia.org/wiki/Safari_version_history\n      'mobile safari webview': 603.1,\n    };\n  }\n\n  return {\n    firefox: 58,\n    chrome: 66,\n    safari: 11.1,\n    'mobile safari webview': 605.1,\n  };\n};\n\nexport default (options: Options = { edge: true }) => {\n  if (options.safari10 !== undefined) {\n    throw new Error('option safari10 removed');\n  }\n\n  const minVersions = minVersionsForOptions(options);\n\n  return (userAgent: string) => {\n    let agent: { key: string; version: string } | undefined;\n    agents.some(({ key, regExp }) => {\n      const res = regExp.exec(userAgent);\n      if (!res || !res[1]) return false;\n      agent = { key, version: res[1] };\n      return true;\n    });\n    if (!agent) return false;\n\n    const minVersion: number | undefined = minVersions[agent.key];\n    if (!minVersion) return false;\n    return parseFloat(agent.version) >= minVersion;\n  };\n};\n"],"names":["agents","key","regExp","minVersionsForOptions","options","edge","firefox","chrome","safari","safari10","undefined","Error","minVersions","userAgent","agent","some","res","exec","version","minVersion","parseFloat"],"mappings":"AAAA;AAOA,MAAMA,MAAM,GAAG,CACb;EAAEC,GAAG,EAAE,MAAP;EAAeC,MAAM,EAAE;CADV,EAEb;EAAED,GAAG,EAAE,SAAP;EAAkBC,MAAM,EAAE;CAFb,EAGb;EAAED,GAAG,EAAE,QAAP;EAAiBC,MAAM,EAAE;CAHZ;AAIb;EAAED,GAAG,EAAE,QAAP;EAAiBC,MAAM,EAAE;CAJZ,EAKb;EACED,GAAG,EAAE,uBADP;EAEEC,MAAM,EAAE;CAPG,CAAf;AAWA,MAAaC,qBAAqB,GAAG,SAAxBA,qBAAwB,CACnCC,OADmC,EAES;MACxCA,OAAO,CAACC,IAAZ,EAAkB;WACT;MACLA,IAAI,EAAE,EADD;MAELC,OAAO,EAAE,EAFJ;MAGLC,MAAM,EAAE,EAHH;MAILC,MAAM,EAAE,IAJH;;+BAMoB;KAN3B;;;SAUK;IACLF,OAAO,EAAE,EADJ;IAELC,MAAM,EAAE,EAFH;IAGLC,MAAM,EAAE,IAHH;6BAIoB;GAJ3B;CAdK;AAsBP,aAAe,UAACJ,OAAgB,GAAG;EAAEC,IAAI,EAAE;CAA5B,EAAuC;MAChDD,OAAO,CAACK,QAAR,KAAqBC,SAAzB,EAAoC;UAC5B,IAAIC,KAAJ,CAAU,yBAAV,CAAN;;;QAGIC,WAAW,GAAGT,qBAAqB,CAACC,OAAD,CAAzC;SAEO,UAACS,SAAD,EAAuB;QACxBC,KAAJ;IACAd,MAAM,CAACe,IAAP,CAAY,UAAC;MAAEd,GAAF;MAAOC;KAAR,EAAqB;YACzBc,GAAG,GAAGd,MAAM,CAACe,IAAP,CAAYJ,SAAZ,CAAZ;UACI,CAACG,GAAD,IAAQ,CAACA,GAAG,CAAC,CAAD,CAAhB,EAAqB,OAAO,KAAP;MACrBF,KAAK,GAAG;QAAEb,GAAF;QAAOiB,OAAO,EAAEF,GAAG,CAAC,CAAD;OAA3B;aACO,IAAP;KAJF;QAMI,CAACF,KAAL,EAAY,OAAO,KAAP;UAENK,UAA8B,GAAGP,WAAW,CAACE,KAAK,CAACb,GAAP,CAAlD;QACI,CAACkB,UAAL,EAAiB,OAAO,KAAP;WACVC,UAAU,CAACN,KAAK,CAACI,OAAP,CAAV,IAA6BC,UAApC;GAZF;CAPF;;;;;"}